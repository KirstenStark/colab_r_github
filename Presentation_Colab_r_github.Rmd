---
title: "Collaborating on research \n using R and github"
author: "Alexander Enge & Kirsten Stark"
date: "13/01/2021"
output:
  ioslides_presentation:
    widescreen: true
    smaller: true
    transition: "faster"
    logo: "figures/hu_logo.png"
---

```{r setup, include=FALSE}
library(knitr)
opts_chunk$set(echo = FALSE)
```

```{css styling}
slides > slide:not(.nobackground):before {
  width: 100px;
  height: 100px;
  background-size: 100px 100px;
}

slides > slide {
  background: linear-gradient(white, white);
}
```

## Schedule

1. RStudio Projects
2. RMarkdown
3. Git + GitHub
4. Environmente management: renv
5. Docker
6. Start collaborating

## 0. Kudos

- Peikert, A., & Brandmaier, A. M. (2020). A Reproducible Data Analysis Workflow with R Markdown, Git, Make, and Docker. https://doi.org/10.31234/osf.io/8xzqy

```{r out.width='75%', fig.align='center'}
include_graphics("figures/peikert_preprint.png")
```

## 1. RStudio Projects - What & Why?

- What it does:
  + ...
  + ...
- Why it helps:
  + ...
  + ...

## 1. RStudio Projects - How?

- In RStudio: File > New Project > ...
- (Example using the sleepstudy data set from lme4)

## 1. RStudio Projects - Troubleshooting

- If necessary

## 2. RMarkdown - What & Why?

- What it does:
  + ...
  + ...
- Why it helps:
  + ...
  + ...

## 2. RMarkdown - How?

- ...

## 2. RMarkdown - Troubleshooting

## 3. Git + GitHub

```{r, fig.align='right'}
include_graphics("figures/jesus.jpg")
```

## 3. Git + GitHub - What & Why?

- What it does:
  + ...
  + ...
- Why it helps:
  + ...
  + ...

## 3. Git + GitHub - How?

- ...

## 3. Git + GitHub - Troubleshooting

## 4. Environment management: renv

```{r out.width='70%', fig.align='right'}
# # This was used to create the plot. To run this code, please install pkggraph and ggplot2.
# library(pkggraph)
# library(dplyr)
# library(ggplot2)
# get_all_dependencies("lmerTest", level = 10, relation = c("Depends", "Imports"), strict = TRUE) %>%
#   make_neighborhood_graph() %>%
#   plot(background = "white") +
#   theme(panel.border = element_rect(color = "white")) +
#   ggsave("figures/lmerTest_depends.png", width = 20, height = 14, units = "cm", dpi = 600)
include_graphics("figures/lmerTest_depends.png")
```

## 4. renv - What & Why?

- What it does:
  + Creates a project-specific library of packages in the project folder
  + Overwrites `install.packages()` to install packages there
  + Keeps track of package versions in the `renv.lock` file
- Why it helps:
  + Keeps package versions untouched by other projects
  + Allows you to revert to the previous state when an update has broken your analysis
  + Makes it easier to share package versions with your collaborators (e.g., via GitHub)

```{r fig.align='right'}
include_graphics("figures/renv.png")
```

## 4. renv - How?

1. Install the renv package: `install.packages(renv)`
2. Initialize your project library: `renv::init()`
3. Install and update your packages as usual: `install.packages("pkgname")`
3. Save the current state of the project library: `renv::snapshot()`
4. Revert to a previous state if an update caused problems: `renv::restore()`

You can skip step #2 if you select "Use renv with this project" during project creation.

```{r fig.align='right'}
include_graphics("figures/renv.png")
```

## 4. renv - Troubleshooting

## 5. Docker - What & Why?

- What it does:
  + ...
  + ...
- Why it helps:
  + ...
  + ...

## 5. Docker - How?

- ...

## 5. Docker - Troubleshooting

## 6. Start colaborating

- ...

